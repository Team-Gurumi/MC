# ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

| íŒŒì¼ | ì„¤ëª… |
| :-- | :-- |
| `go.mod`, `go.sum` | Go ëª¨ë“ˆ ì˜ì¡´ì„± ê´€ë¦¬ íŒŒì¼ |
| `run_*.sh` | ì‹¤í—˜ ë° ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰ìš© ì…¸ ìŠ¤í¬ë¦½íŠ¸ (`run_experiments1.sh`, `run_fault_tolerance_benchmark.sh` ë“±) |
| `analyze_metrics.py` | ì‹¤í—˜ ê²°ê³¼ ë¶„ì„ìš© Python ìŠ¤í¬ë¦½íŠ¸ |
| `agent`, `control`, `seeder` | `cmd/` í´ë”ì˜ ì†ŒìŠ¤ê°€ ì»´íŒŒì¼ëœ ì‹¤í–‰ ë°”ì´ë„ˆë¦¬ íŒŒì¼ |

---

## ğŸ§© `cmd/` â€” ì‹¤í–‰ ì§„ì…ì  (Main Applications)

í”„ë¡œì íŠ¸ì˜ **ë©”ì¸ ì‹¤í–‰ í”„ë¡œê·¸ë¨ ì§„ì…ì **ì´ ë“¤ì–´ìˆëŠ” í´ë”ì´ë‹¤.  
ê° í•˜ìœ„ í´ë”ê°€ ê°œë³„ ì‹¤í–‰ íŒŒì¼ì´ë‹¤.

| í´ë” | ì—­í•  |
| :-- | :-- |
| `cmd/agent/` | ì—ì´ì „íŠ¸(Agent) ë…¸ë“œì˜ ì‹¤í–‰ ì§„ì…ì  â€” ì‘ì—… ì‹¤í–‰Â·ìƒíƒœ ê´€ë¦¬ ë‹´ë‹¹ |
| `cmd/control/` | ì»¨íŠ¸ë¡¤(Control) ì„œë²„ ì‹¤í–‰ ì§„ì…ì  â€” ì¤‘ì•™ ê´€ë¦¬ ë° API ì„œë²„ |
| `cmd/seeder/` | ì‹œë”(Seeder) ë…¸ë“œ ì‹¤í–‰ ì§„ì…ì  â€” P2Pë¡œ ì…ë ¥ íŒŒì¼ ì „ì†¡ |
| `cmd/dhtget/` | DHT ë„¤íŠ¸ì›Œí¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ìœ í‹¸ë¦¬í‹° ë„êµ¬(ë””ë²„ê¹…ìš©) |

---

## ğŸ§  `pkg/` â€” ê³µí†µ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Core Packages)

ëª¨ë“  ì‹¤í–‰ ëª¨ë“ˆ(`cmd/...`)ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” **í•µì‹¬ ê¸°ëŠ¥ íŒ¨í‚¤ì§€**ë“¤ì´ ìœ„ì¹˜í•œë‹¤.

| í´ë” | ì—­í•  |
| :-- | :-- |
| `pkg/agent/` | ì—ì´ì „íŠ¸ ë¡œì§: ì‘ì—… ì‹¤í–‰, ìƒíƒœ ë³´ê³ , ë¦¬ìŠ¤(Lease) ê´€ë¦¬ |
| `pkg/dht/` | ë¶„ì‚° í•´ì‹œ í…Œì´ë¸”(DHT) ë…¸ë“œ ë° XOR ë¼ìš°íŒ… ë¡œì§ |
| `pkg/p2p/` | í”¼ì–´ ê°„ P2P í†µì‹  í”„ë¡œí† ì½œ êµ¬í˜„ |
| `pkg/task/` | ì‘ì—…(Task) ë°ì´í„° êµ¬ì¡° ë° ë¦¬ìŠ¤Â·ìì› ì ìœ  ê´€ë ¨ ë¡œì§ |
| `pkg/demand/` | PostgreSQL ê¸°ë°˜ ì‘ì—…(Job) ì €ì¥ ë° ê´€ë¦¬ ë¡œì§ |
| `pkg/seeder/` | ì‹œë”(Seeder) ìš”ì²­ ì²˜ë¦¬ ë° ë°ì´í„° ë¶„ë°° ë¡œì§ |

---



#ì„œë²„ì— Go, Docker, systemd ëŠ” ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨

#ì„¤ì¹˜
# ì»¨íŠ¸ë¡¤ ì„œë²„ ì„¤ì¹˜(ì›ê²©)
make install-control HOST=ubuntu@control-box PORT=8080 TIMEOUT=180

# ì—ì´ì „íŠ¸ ì„¤ì¹˜(ì›ê²©) - ì»¨íŠ¸ë¡¤ ì„œë²„ ì£¼ì†Œ ë„˜ê¹€(ë¡œì»¬/í…Œì¼ìŠ¤ì¼€ì¼ IP)
make install-agent  HOST=ubuntu@node-1 CONTROL_URL=http://100.70.1.2:8080
# ì‘ì—… ì§€ì •í•  ë…¸ë“œ (ì—ì´ì „íŠ¸) - ê°™ì€ ì»¨íŠ¸ë¡¤ì— ë¶™ì´ê³  kata ì‚¬ìš©
make install-agent  HOST=ubuntu@B CONTROL_URL=http://100.70.1.2:8080 DOCKER_RUNTIME=kata-runtime

# ì´í›„ ì¬ì‹œì‘/ë¡œê·¸
make agent-restart  HOST=ubuntu@node-1
make logs-agent     HOST=ubuntu@node-1

# ì‘ì—… ì²˜ë¦¬í•  agentì˜ NODE_ID í™•ì¸
ssh ubuntu@B 'hostname'      # ì˜ˆ: "node-b"
# ë˜ëŠ”
ssh ubuntu@B 'systemctl show -p Environment mc-agent'

# ì‚¬ìš©ìê°€ ì‘ì—… push (target_node ì§€ì •)
curl -X POST http://100.70.1.2:8080/api/tasks/push \
  -H 'Content-Type: application/json' \
  -d '{
    "image": "alpine:3.20",
    "cmd": ["sh","-c","echo hi-from-A && sleep 2 && uname -a"],
    "timeout_sec": 60,
    "labels": {
      "job": "demo",
      "target_node": "node-b"
    },
    "resources": {
      "nano_cpus": 500000000,
      "memory_bytes": 268435456
    }
  }'

# ê²°ê³¼ í™•ì¸
curl http://<control-host>:8080/api/tasks
curl http://<control-host>:8080/api/tasks/<taskId>
